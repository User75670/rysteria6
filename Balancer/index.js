// Copyright (C) 2024 Paul Johnson
// Copyright (C) 2024-2025 Maxim Nesterov

// This program is free software: you can redistribute it and/or modify
// it under the terms of the GNU Affero General Public License as
// published by the Free Software Foundation, either version 3 of the
// License, or (at your option) any later version.

// This program is distributed in the hope that it will be useful,
// but WITHOUT ANY WARRANTY; without even the implied warranty of
// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
// GNU Affero General Public License for more details.

// You should have received a copy of the GNU Affero General Public License
// along with this program.  If not, see <https://www.gnu.org/licenses/>.

//{"accounts":["dc04d57b-2a96-4dcf-869e-8811c2e2932e","359578d0-82e8-43f3-9f73-3afd37107893","b61d32e8-6a7e-48ea-9bc6-2743507376af","7ec2c2b7-24c2-4ffa-9940-eec1339178fc","c28d1c3d-b9b0-49a0-bb13-6384fd4ebd4a","39c0ecb2-113e-4384-b54d-7af64e0fd775","5b63f876-5bfb-4076-a376-7637861d7cdb","c9b41d8f-0b0e-4c0f-9990-0bb5e45a1f0b"],"links":[],"dc04d57b-2a96-4dcf-869e-8811c2e2932e":{"password":"95a194ded1348ace4101e9ea0d7a47a529b5acbadaef983796b14e8fbf5851a47312ef8b126735f52ae6401349c9baff17eae3533f765573e503114680d4f504","username":"dc04d57b-2a96-4dcf-869e-8811c2e2932e","xp":800000000,"petals":{"1:0":10,"8:1":1,"10:1":1,"12:0":1},"failed_crafts":{},"mob_gallery":{"9:0":36,"9:1":2},"checkpoint":0},"359578d0-82e8-43f3-9f73-3afd37107893":{"password":"84fa21c2e2f67725b90302e11872cf26b3651220b80300c9f0b923ad636df28e889e7abfd6ff075b861b38d8f734f278079660e68cf0a95e231433584894a2d3","username":"359578d0-82e8-43f3-9f73-3afd37107893","xp":1536539240,"petals":{"1:1":2,"2:0":5,"2:1":31,"2:2":1641,"2:3":2491,"2:4":347,"2:5":14,"2:6":1,"3:0":22,"3:1":59,"3:2":464,"3:3":1067,"3:4":362,"3:5":13,"3:6":1,"4:0":14,"4:1":62,"4:2":1049,"4:3":2028,"4:4":286,"4:5":21,"4:6":1,"5:2":51,"5:3":357,"5:4":57,"5:5":2,"6:2":374,"6:3":392,"6:4":88,"6:5":18,"6:6":2,"7:4":2,"7:5":4,"7:6":2,"8:1":8,"8:2":45,"8:3":469,"8:4":207,"8:5":9,"8:6":2,"9:1":42,"9:2":646,"9:3":2304,"9:4":353,"9:5":18,"10:1":3,"10:2":6,"10:3":6,"10:4":3,"10:5":2,"11:2":8,"11:3":4,"11:4":1,"12:0":8,"12:1":13,"12:2":496,"12:3":2880,"12:4":567,"12:5":11,"12:6":1,"13:0":1,"13:2":6,"13:3":21,"13:4":27,"13:6":1,"14:0":2,"14:1":11,"14:2":37,"14:3":46,"14:4":9,"14:5":1,"15:2":110,"15:3":303,"15:4":42,"15:5":3,"16:4":1,"16:5":1,"17:1":7,"17:2":17,"17:3":53,"17:4":26,"17:5":8,"18:0":1,"18:2":13,"18:3":45,"18:4":44,"18:5":7,"18:6":1,"19:2":465,"19:3":2664,"19:4":516,"19:5":9,"19:6":1,"20:0":2,"20:1":16,"20:2":71,"20:3":201,"20:4":9,"20:6":1,"21:1":108,"21:2":516,"21:3":771,"21:4":263,"21:5":21,"21:6":1,"22:1":55,"22:2":246,"22:3":225,"22:4":27,"22:5":2,"23:4":24,"23:5":2,"24:4":27,"24:5":16,"24:6":1,"25:1":3,"25:2":4,"25:3":7,"25:4":4,"26:0":14,"26:1":72,"26:2":1721,"26:3":1506,"26:4":154,"26:5":18,"27:1":1,"27:2":14,"27:3":53,"27:4":34,"27:5":8,"28:1":3,"28:2":2,"28:3":8,"28:4":5,"28:5":1,"29:5":3,"29:6":1,"30:5":2,"30:6":1,"31:5":7,"31:6":1,"32:5":1,"32:6":1,"33:1":13,"33:2":747,"33:3":2558,"33:4":445,"33:5":6,"33:6":1,"34:1":167,"34:2":369,"34:3":388,"34:4":123,"34:5":16,"34:6":2},"failed_crafts":{"2:2":7,"2:3":3,"2:4":3,"2:5":1,"3:3":17,"3:4":36,"4:4":1,"8:3":60,"8:4":34,"8:5":1,"9:4":5,"12:2":1,"12:3":7,"12:4":19,"12:5":2,"19:2":1,"19:3":33,"19:4":37,"19:5":1,"33:2":11,"33:3":9,"33:4":3,"33:5":1},"mob_gallery":{"0:0":12,"0:1":6,"0:2":5,"0:3":38,"0:4":1464,"0:5":313,"0:6":4,"0:7":3,"1:0":10,"1:1":48,"1:2":42,"1:3":161,"1:4":3137,"1:5":510,"1:6":2,"1:7":17,"2:0":1,"2:1":1,"2:2":1,"2:3":14,"2:4":26,"2:5":28,"2:7":1,"3:4":1,"3:5":1,"4:0":7,"4:1":11,"4:2":27,"4:3":616,"4:4":487,"4:5":167,"4:6":3,"4:7":17,"5:0":7,"5:1":14,"5:2":7,"5:3":88,"5:4":7193,"5:5":1154,"5:6":2,"5:7":3,"6:0":4,"6:1":7,"6:2":10,"6:3":50,"6:4":438,"6:5":59,"6:7":2,"7:0":2,"7:1":6,"7:2":5,"7:3":36,"7:4":280,"7:5":23,"7:7":1,"8:1":3,"8:2":4,"8:3":20,"8:4":60,"8:5":44,"8:6":1,"8:7":7,"9:0":138,"9:1":2,"9:2":1,"9:3":8,"9:4":9,"9:5":2,"10:0":17,"10:1":35,"10:2":31,"10:3":133,"10:4":390,"10:5":182,"10:6":1,"10:7":2,"11:0":4,"11:1":6,"11:2":3,"11:3":24,"11:4":62,"11:5":44,"11:7":2,"12:7":3,"13:7":2,"14:7":1,"15:7":2,"17:7":1,"18:7":6,"19:7":1},"checkpoint":5},"b61d32e8-6a7e-48ea-9bc6-2743507376af":{"password":"402aa8fb432addc0c9c96642fc1924329ecb9778a3b5125a816ea7cd9de8e1c951b3e9e5ffb67721620c1c274e2caa91be24138216c16ceb9b0d60d172d1c314","username":"b61d32e8-6a7e-48ea-9bc6-2743507376af","xp":920097940,"petals":{"1:0":10,"2:0":1,"2:1":8,"2:2":1004,"2:3":2735,"2:4":179,"2:5":3,"3:0":11,"3:1":7,"3:2":210,"3:3":1007,"3:4":42,"3:5":3,"4:0":6,"4:1":4,"4:2":107,"4:3":518,"4:4":17,"4:5":4,"5:2":10,"5:3":90,"5:4":7,"5:5":2,"6:2":53,"6:3":331,"6:4":15,"6:5":4,"6:6":1,"7:3":2,"7:4":3,"8:1":3,"8:2":17,"8:3":670,"8:4":65,"8:5":6,"8:6":1,"9:1":7,"9:2":90,"9:3":464,"9:4":5,"9:5":4,"10:1":1,"10:3":3,"10:4":3,"10:5":1,"11:3":4,"11:4":2,"12:0":4,"12:1":5,"12:2":241,"12:3":3463,"12:4":280,"12:5":6,"13:2":4,"13:3":25,"13:4":3,"13:5":4,"14:0":2,"14:2":36,"14:3":82,"14:4":10,"15:2":19,"15:3":78,"15:4":6,"15:5":2,"16:4":1,"16:5":1,"17:2":19,"17:3":78,"17:4":4,"17:5":1,"18:1":1,"18:2":5,"18:3":51,"18:4":3,"18:5":1,"19:2":246,"19:3":3409,"19:4":262,"19:5":4,"20:0":1,"20:1":1,"20:2":18,"20:3":52,"20:4":2,"21:1":9,"21:2":63,"21:3":585,"21:4":1,"21:5":4,"22:1":8,"22:2":172,"22:3":6,"22:4":13,"22:5":1,"22:6":1,"23:4":4,"23:5":1,"24:4":1,"24:5":1,"25:3":1,"25:4":1,"26:0":5,"26:1":9,"26:2":207,"26:3":8,"26:4":4,"26:5":4,"27:2":6,"27:3":3,"27:4":5,"27:5":1,"28:3":2,"28:4":3,"28:5":1,"33:1":3,"33:2":464,"33:3":3313,"33:4":681,"33:5":3,"34:1":4,"34:2":31,"34:3":297,"34:4":281,"34:5":3,"34:6":1},"failed_crafts":{"2:2":6,"2:4":7,"2:5":4,"3:2":4,"3:3":14,"3:4":14,"3:5":6,"4:3":13,"4:4":13,"5:2":3,"5:3":10,"5:4":11,"6:3":26,"6:4":22,"6:5":1,"8:2":4,"8:3":2,"8:4":5,"8:5":3,"9:2":1,"9:3":14,"9:4":15,"9:5":1,"12:3":8,"12:4":1,"12:5":6,"13:3":6,"13:4":18,"14:3":19,"14:4":5,"15:2":5,"15:3":12,"15:4":16,"17:2":8,"17:3":7,"17:4":34,"18:3":8,"18:4":8,"18:5":1,"19:2":2,"19:3":6,"19:4":46,"19:5":3,"20:2":5,"20:3":6,"20:4":16,"21:2":12,"21:3":15,"21:4":49,"21:5":4,"22:2":1,"22:4":8,"23:4":9,"24:4":33,"25:4":1,"26:2":7,"26:3":13,"26:4":24,"27:4":51,"33:2":11,"33:3":16,"33:4":9,"33:5":2,"34:2":2,"34:3":17,"34:4":55},"mob_gallery":{"0:0":11,"0:1":5,"0:2":5,"0:3":6,"0:4":1587,"0:5":502,"0:6":1,"1:0":7,"1:1":14,"1:2":16,"1:3":22,"1:4":711,"1:5":826,"1:6":2,"2:0":1,"2:3":4,"2:4":53,"2:5":103,"2:6":3,"3:4":3,"3:5":2,"4:0":6,"4:1":5,"4:2":9,"4:3":40,"4:4":481,"4:5":614,"4:6":4,"5:0":6,"5:1":8,"5:2":3,"5:3":24,"5:4":7417,"5:5":1446,"6:0":4,"6:1":3,"6:2":4,"6:3":8,"6:4":175,"6:5":186,"6:6":1,"7:0":2,"7:2":1,"7:3":4,"7:4":114,"7:5":85,"8:1":1,"8:2":3,"8:3":4,"8:4":169,"8:5":170,"8:6":3,"9:0":16,"9:4":3,"9:5":4,"10:0":11,"10:1":7,"10:2":13,"10:3":21,"10:4":474,"10:5":629,"10:6":2,"11:0":4,"11:1":3,"11:2":3,"11:3":6,"11:4":112,"11:5":132},"checkpoint":5},"7ec2c2b7-24c2-4ffa-9940-eec1339178fc":{"password":"bdf8262cf641d774618cb5063d2638d29167b8eba94aa18e2ded50401cc43a46b00ffda724be054b48ef80ef688610e1f8013d5d87abf4095bfb8e7876e375a0","username":"7ec2c2b7-24c2-4ffa-9940-eec1339178fc","xp":6820714,"petals":{"1:1":2,"2:0":53,"2:1":94,"2:2":73,"2:3":5,"2:4":4,"2:5":1,"3:0":27,"3:1":31,"3:2":71,"3:3":4,"3:4":4,"3:5":1,"4:0":69,"4:1":85,"4:2":86,"4:3":1,"4:4":3,"4:5":1,"5:2":15,"5:3":4,"5:4":3,"6:2":74,"6:3":7,"6:4":2,"7:2":3,"8:1":26,"8:2":14,"8:3":2,"8:4":1,"8:5":2,"9:1":30,"9:2":68,"9:3":6,"9:4":4,"10:1":32,"10:2":5,"10:3":5,"10:4":1,"11:2":5,"11:3":2,"11:4":1,"12:0":16,"12:1":17,"12:2":50,"12:3":3,"12:4":4,"12:5":2,"13:0":2,"13:1":2,"13:3":10,"13:4":2,"13:5":1,"13:6":3,"14:1":4,"14:2":10,"14:3":4,"15:2":22,"15:3":40,"15:4":3,"17:1":2,"17:2":3,"17:3":9,"17:4":2,"18:0":4,"18:1":1,"18:2":4,"18:3":10,"18:4":2,"19:2":43,"19:3":1,"19:4":3,"19:5":3,"20:0":7,"20:1":5,"20:2":7,"20:3":13,"21:1":41,"21:2":96,"21:3":4,"21:4":3,"22:1":31,"22:2":54,"22:3":21,"25:1":4,"25:2":3,"25:3":4,"25:4":1,"26:0":20,"26:1":49,"26:2":4,"26:3":4,"26:4":1,"27:0":1,"27:1":1,"27:2":4,"27:3":3,"27:4":2,"28:1":4,"28:2":1,"28:3":6,"28:4":3,"29:0":23,"29:1":14,"29:2":3,"30:1":11,"30:2":1,"30:5":2,"31:0":6,"31:1":5,"31:2":1,"31:5":1,"32:5":1,"33:1":19,"33:2":4,"33:3":3,"33:4":1,"33:5":2,"34:1":42,"34:2":55,"34:3":2,"34:4":2},"failed_crafts":{"2:3":1,"2:4":18,"3:2":2,"3:3":1,"3:4":8,"4:2":1,"4:3":24,"4:4":1,"5:3":17,"6:2":10,"6:3":27,"8:2":3,"8:4":14,"9:2":3,"9:4":2,"12:2":1,"12:3":15,"12:4":21,"17:4":1,"18:4":1,"19:2":3,"19:3":14,"19:4":13,"21:1":5,"21:2":2,"21:3":15,"21:4":2,"22:3":1,"25:3":1,"26:2":1,"26:3":22,"27:3":2,"27:4":1,"33:2":4,"33:3":2,"33:4":10,"34:2":5,"34:3":13},"mob_gallery":{"0:0":21,"0:1":11,"0:2":1,"0:3":19,"0:4":176,"0:5":26,"0:6":3,"1:0":47,"1:1":44,"1:2":10,"1:3":103,"1:4":155,"1:6":1,"2:0":7,"2:2":4,"2:3":17,"2:4":10,"3:2":1,"4:0":31,"4:1":8,"4:2":7,"4:3":253,"4:4":121,"5:0":22,"5:1":5,"5:2":2,"5:3":76,"5:4":848,"5:5":125,"6:0":17,"6:1":5,"6:3":18,"6:4":58,"7:0":19,"7:1":3,"7:2":1,"7:3":17,"7:4":20,"8:0":12,"8:1":2,"8:2":1,"8:3":6,"8:4":16,"8:5":6,"9:0":187,"9:1":6,"9:3":10,"9:4":3,"9:5":1,"10:0":42,"10:1":20,"10:2":4,"10:3":67,"10:4":86,"11:0":11,"11:1":1,"11:2":1,"11:3":9,"11:4":17,"12:1":22,"12:2":44,"13:1":48,"13:2":56,"14:1":37,"14:2":79,"15:1":34,"15:2":39,"15:7":1,"17:1":6,"17:2":6,"18:1":7,"18:2":11},"checkpoint":0},"c28d1c3d-b9b0-49a0-bb13-6384fd4ebd4a":{"password":"bc6fb18d97598da4421b943d2329f7d14ac9eea8b13bf84881fb26e32013043bfa75d58481157b1df66a4be74ddb2a40b16e7e49e548b7ae55494f4fc51c51b0","username":"c28d1c3d-b9b0-49a0-bb13-6384fd4ebd4a","xp":47314986,"petals":{"1:1":2,"2:0":3,"2:1":20,"2:2":620,"2:3":52,"2:4":9,"2:5":4,"3:0":20,"3:1":35,"3:2":189,"3:3":45,"3:4":4,"3:5":5,"4:0":11,"4:1":38,"4:2":32,"4:3":45,"4:4":5,"4:5":2,"5:2":27,"5:3":13,"5:4":2,"5:5":2,"6:2":45,"6:3":72,"6:4":7,"6:5":3,"7:2":3,"7:3":1,"7:4":4,"8:1":9,"8:2":21,"8:3":7,"8:4":7,"8:5":4,"9:1":19,"9:2":13,"9:3":63,"9:4":5,"9:5":4,"10:1":1,"10:2":11,"10:3":10,"10:4":6,"10:5":1,"11:2":10,"11:3":11,"11:4":3,"12:0":7,"12:1":10,"12:2":203,"12:3":58,"12:4":10,"12:5":2,"13:0":7,"13:1":3,"13:2":5,"13:3":15,"13:4":6,"14:1":4,"14:2":19,"14:3":5,"14:4":3,"15:2":45,"15:3":9,"15:4":3,"15:5":1,"16:4":1,"17:1":5,"17:2":23,"17:3":3,"17:4":3,"17:5":1,"18:0":5,"18:1":1,"18:2":11,"18:3":7,"18:4":4,"18:5":2,"19:2":201,"19:3":57,"19:4":6,"19:5":1,"20:1":10,"20:2":15,"20:3":5,"20:4":4,"21:1":65,"21:2":50,"21:3":68,"21:4":8,"21:5":4,"22:1":34,"22:2":150,"22:3":10,"22:4":4,"23:4":4,"24:4":5,"25:2":8,"25:3":12,"25:4":6,"25:5":1,"26:0":12,"26:1":42,"26:2":51,"26:3":25,"26:4":4,"26:5":3,"27:0":1,"27:2":9,"27:3":6,"27:4":7,"27:5":1,"28:2":3,"28:3":4,"28:4":4,"28:5":2,"33:1":14,"33:2":12,"33:3":60,"33:4":9,"33:5":3,"34:1":5,"34:2":31,"34:3":31,"34:4":5,"34:5":4},"failed_crafts":{"2:2":3,"2:3":17,"2:4":6,"2:5":1,"3:4":5,"3:5":1,"4:2":4,"4:3":1,"4:4":47,"5:3":13,"5:4":1,"6:2":11,"6:3":3,"6:4":12,"8:2":1,"8:4":4,"8:5":1,"9:1":1,"9:3":13,"9:4":15,"12:3":4,"12:4":12,"12:5":3,"13:1":2,"13:3":15,"13:4":7,"14:3":10,"14:4":3,"15:4":10,"17:3":15,"17:4":15,"18:3":14,"18:4":20,"19:3":18,"19:4":32,"19:5":1,"20:3":3,"20:4":2,"21:2":9,"21:3":11,"21:4":28,"22:3":4,"22:4":7,"23:4":7,"24:4":6,"26:2":9,"26:3":25,"26:4":23,"27:3":18,"27:4":12,"28:3":5,"28:4":1,"33:2":13,"33:3":14,"33:4":5,"34:1":1,"34:2":3,"34:3":4,"34:4":34},"mob_gallery":{"0:0":3,"0:1":6,"0:2":1,"0:3":23,"0:4":501,"0:5":149,"1:0":8,"1:1":43,"1:2":18,"1:3":87,"1:4":2752,"1:5":462,"2:0":2,"2:1":6,"2:2":73,"2:3":126,"2:4":23,"2:5":26,"3:2":4,"3:3":1,"3:4":5,"3:5":1,"4:0":7,"4:1":4,"4:2":19,"4:3":595,"4:4":403,"4:5":147,"4:6":3,"5:0":3,"5:1":5,"5:2":2,"5:3":62,"5:4":2677,"5:5":434,"5:6":2,"6:0":5,"6:1":10,"6:2":5,"6:3":20,"6:4":200,"6:5":51,"6:7":1,"7:0":4,"7:1":6,"7:2":5,"7:3":24,"7:4":90,"7:5":16,"8:0":3,"8:1":6,"8:2":1,"8:3":10,"8:4":55,"8:5":56,"9:0":57,"9:1":5,"9:3":21,"9:4":13,"9:5":5,"9:6":1,"10:0":14,"10:1":25,"10:2":17,"10:3":74,"10:4":253,"10:5":153,"10:6":1,"11:0":3,"11:1":2,"11:3":8,"11:4":52,"11:5":39,"12:1":1,"15:1":1},"checkpoint":5},"39c0ecb2-113e-4384-b54d-7af64e0fd775":{"password":"237f48c5c879f88b49688ebe7033b24f1e955484d786474e52c8279408fb6606b50c1f5e9010d0e4dd132a53fbd53a96b94531394c6c49f7f84f64a202985dff","username":"39c0ecb2-113e-4384-b54d-7af64e0fd775","xp":0,"petals":{"1:0":10,"8:1":1,"10:1":1,"12:0":1},"failed_crafts":{},"mob_gallery":{},"checkpoint":0},"5b63f876-5bfb-4076-a376-7637861d7cdb":{"password":"69213dba5948d786b0d3264a3dc1e33c19c53a0087d7cf6b89be2424bb740a80b6c900febf1df80dc5d346b7db038fd8170e9359b03ff9c2df976e8307a017ae","username":"5b63f876-5bfb-4076-a376-7637861d7cdb","xp":0,"petals":{"1:0":10,"8:1":1,"10:1":1,"12:0":1},"failed_crafts":{},"mob_gallery":{},"checkpoint":0},"c9b41d8f-0b0e-4c0f-9990-0bb5e45a1f0b":{"password":"22df98db04dc6b42513535e02153271d4c1d6274e3af2cf7873cc466086b6191bfdf138576f94066f9d44a37040c2055337295eb6f0fd31cf414c9d842dba267","username":"c9b41d8f-0b0e-4c0f-9990-0bb5e45a1f0b","xp":0,"petals":{"1:0":10,"8:1":1,"10:1":1,"12:0":1},"failed_crafts":{},"mob_gallery":{},"checkpoint":0}}

const rr_rarity_id_max = 7;

const canvas = document.createElement("canvas");
const ctx = canvas.getContext('2d');
for (let i = 0; i < rr_rarity_id_max; ++i)
    {
        document.getElementById("d" + i).value = 3;
        document.getElementById("m" + i).value = 3;
    }
canvas.width = canvas.height = 1000;
document.body.appendChild(canvas);
ctx.setTransform(1,0,0,1,0,0);
ctx.fillRect(100,100,100,100);
ctx.fillRect(50,50,100,100);

let RR_DROP_RARITY_COEFFICIENTS = [0, 1, 8, 8, 8, 8, 20, 3];
let RR_MOB_RARITY_COEFFICIENTS = [3, 3, 3, 3, 3, 3, 15];

function init_rarity_coefficients()
{
    for (let i = 0; i < rr_rarity_id_max; ++i)
    {
        RR_DROP_RARITY_COEFFICIENTS[i + 1] = parseInt(document.getElementById("d" + i).value);
        RR_MOB_RARITY_COEFFICIENTS[i] = parseInt(document.getElementById("m" + i).value);
    }
    let sum = RR_DROP_RARITY_COEFFICIENTS[1];
    for (let a = 1; a < rr_rarity_id_max; ++a)
    {
        sum += (RR_DROP_RARITY_COEFFICIENTS[a + 1] = RR_DROP_RARITY_COEFFICIENTS[a] / RR_DROP_RARITY_COEFFICIENTS[a + 1]);
        RR_MOB_RARITY_COEFFICIENTS[a] *= RR_MOB_RARITY_COEFFICIENTS[a - 1];
    }
    for (let a = 1; a <= rr_rarity_id_max; ++a)
        RR_DROP_RARITY_COEFFICIENTS[a] = RR_DROP_RARITY_COEFFICIENTS[a] / sum + RR_DROP_RARITY_COEFFICIENTS[a - 1];
    RR_DROP_RARITY_COEFFICIENTS[rr_rarity_id_max] = 1;

}

const names = ["none","common","unusual","rare","epic","legendary","mythic","exotic"]
function loop()
{
    let seed = parseFloat(document.getElementById("seed").value);
    init_rarity_coefficients();
    canvas.width = canvas.width;
    ctx.setTransform(1,0,0,1,0,200);
    ctx.font = '10px Ubuntu';
    ctx.lineWidth = 2;
    ctx.fillStyle = '#ffffff';
    ctx.strokeStyle = '#000000';
    ctx.textAlign = 'center';
    ctx.textBaseline = 'middle';
    for (let mob = 0; mob < rr_rarity_id_max; ++mob)
    {
        let cap = mob == 0 ? 1 : mob > 4 ? mob == 6 ? 5 : 4 : mob;
        const text = (100 * Math.pow(1 - seed, RR_MOB_RARITY_COEFFICIENTS[mob])).toFixed(2) + "%";
        ctx.strokeText(text, 30, 15 + mob * 15);
        ctx.fillText(text, 30, 15 + mob * 15);
        for (let drop = 0; drop <= cap; ++drop)
        {
            let start = RR_DROP_RARITY_COEFFICIENTS[drop];
            let end = drop == cap ? 1 : RR_DROP_RARITY_COEFFICIENTS[drop + 1];
            const text = (100 * (Math.pow(1 - (1 - end) * seed, RR_MOB_RARITY_COEFFICIENTS[mob]) - Math.pow(1 - (1 - start) * seed, RR_MOB_RARITY_COEFFICIENTS[mob]))).toFixed(2) + "%";
            ctx.strokeText(text, 90 + drop * 60, 15 + mob * 15);
            ctx.fillText(text, 90 + drop * 60, 15 + mob * 15);
        }
    }
    requestAnimationFrame(loop);
}

loop();
